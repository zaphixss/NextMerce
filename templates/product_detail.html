{% extends 'partials/base.html' %}
{% load static %}


{% block content %}
<div class="border-b border-gray-200 py-[2rem] flex items-center justify-between px-[19rem]">
    <h1 class="font-medium text-3xl">Shop Details</h1>
    <div class="text-sm">
        <a href="{% url 'index' %}" class="hover:text-blue-400">Home /</a>
        <a href="{% url 'index' %}" class="text-[#2563eb]">Shop Details</a>
    </div>
</div>
<section class="">

    <div class="grid gap-10 grid-cols-2 mt-[5rem] px-[19rem]">

        <!-- LEFT: Image card -->
        <div class="rounded-3xl bg-zinc-100/70 p-6 md:p-8">
            <div class="flex items-start justify-end">

                <!-- Modal toggle -->
                <button data-modal-target="default-modal" data-modal-toggle="default-modal"
                    class="h-11 w-11 place-items-center rounded-full bg-white shadow-sm ring-1 ring-zinc-200 hover:bg-zinc-50"
                    type="button">
                    <i class="fa-solid fa-up-right-and-down-left-from-center text-zinc-700"></i>
                </button>

                <!-- Main modal -->
                <div id="default-modal" tabindex="-1" aria-hidden="true" class="fixed inset-0 z-50 hidden bg-black/80">
                    <!-- Close icon (top-right of overlay) -->
                    <button type="button" data-modal-hide="default-modal"
                        class="fixed right-6 top-6 z-[60] grid h-12 w-12 place-items-center rounded-full text-white/90 hover:bg-white/10 hover:text-white"
                        aria-label="Close modal">
                        <!-- Font Awesome -->
                        <i class="fa-solid fa-xmark text-2xl"></i>
                    </button>

                    <!-- Center content -->
                    <div class="flex h-full w-full items-center justify-center p-4">
                        <div class="relative w-full max-w-3xl">
                            <!-- your image / content -->
                            <img src="{{product.image.url}}" alt="Product"
                                class="mx-auto max-h-[70vh] w-auto rounded-xl object-contain" />
                        </div>
                    </div>
                </div>

            </div>

            <div class="mt-6 flex items-center justify-center">
                <img src="{{product.image.url}}" alt="Product" class="h-72 w-auto object-contain md:h-80" />
            </div>
        </div>

        <!-- RIGHT: Details -->
        <div class="pt-2">
            <div class="flex items-start justify-between gap-4">
                <h1 class="text-3xl font-semibold tracking-tight text-zinc-900 md:text-4xl">
                    {{product.name}}
                </h1>

                <span
                    class="mt-1 inline-flex items-center rounded-full bg-indigo-600 px-3 py-1 text-xs font-semibold text-white">
                    30% OFF
                </span>
            </div>

            <!-- Rating + reviews + stock -->
            <div class="mt-3 flex flex-wrap items-center gap-x-3 gap-y-2">
                <div class="flex items-center gap-1 text-zinc-300">
                    <i class="fa-solid fa-star text-[14px]"></i>
                    <i class="fa-solid fa-star text-[14px]"></i>
                    <i class="fa-solid fa-star text-[14px]"></i>
                    <i class="fa-solid fa-star text-[14px]"></i>
                    <i class="fa-solid fa-star text-[14px]"></i>
                </div>

                <a href="#" class="text-sm text-zinc-700 hover:text-zinc-900">
                    ( 0 customer reviews )
                </a>

                <span class="mx-1 hidden h-5 w-px bg-zinc-200 md:inline-block"></span>


                {% if product.in_stock %}
                <span class="inline-flex items-center gap-2 text-sm font-medium text-emerald-600">
                    <span class="grid h-5 w-5 place-items-center rounded-full bg-emerald-50">
                        <i class="fa-solid fa-check text-[12px]"></i>
                    </span>
                    In Stock
                </span>
                {% endif %}

            </div>

            <!-- Price -->
            <div class="mt-5 text-lg text-zinc-900">
                <span class="font-semibold">Price:</span>

                {% if product.regular_price %}
                <span class="ml-2 text-zinc-400 line-through">{{product.regular_price}}</span>

                {% endif %}

                <span class="ml-2 font-semibold">{{product.sale_price}}</span>
            </div>

            <!-- Perks -->
            <div class="mt-4 space-y-3">

                {% if product.free_delivery %}
                <div class="flex items-start gap-3">
                    <span class="mt-0.5 grid h-5 w-5 place-items-center rounded-full bg-indigo-50 text-indigo-600">
                        <i class="fa-solid fa-check text-[12px]"></i>
                    </span>
                    <p class="text-sm text-zinc-700">Free delivery available</p>
                </div>
                {% endif %}


                <div class="flex items-start gap-3">
                    <span class="mt-0.5 grid h-5 w-5 place-items-center rounded-full bg-indigo-50 text-indigo-600">
                        <i class="fa-solid fa-check text-[12px]"></i>
                    </span>
                    <p class="text-sm text-zinc-700">Sales 30% Off Use Code: PROMO30</p>
                </div>

                <div class="flex items-start gap-3">
                    <span class="mt-0.5 grid h-5 w-5 place-items-center rounded-full bg-indigo-50 text-indigo-600">
                        <i class="fa-solid fa-check text-[12px]"></i>
                    </span>
                    <p class="text-sm text-zinc-700">test</p>
                </div>
            </div>

            <div class="my-7 h-px w-full bg-zinc-200"></div>

            <!-- Color -->
            <div class="flex items-center gap-4">
                <span class="text-sm font-semibold text-zinc-900">Color:</span>
                <div class="flex items-center gap-3">
                    <button type="button"
                        class="h-5 w-5 rounded-full bg-black ring-2 ring-transparent hover:ring-zinc-300"
                        aria-label="Black"></button>
                    <button type="button"
                        class="h-5 w-5 rounded-full bg-blue-600 ring-2 ring-blue-200 hover:ring-blue-300"
                        aria-label="Blue"></button>
                </div>
            </div>

            <div class="my-7 h-px w-full bg-zinc-200"></div>

            <!-- Qty + actions -->
            <div class="flex flex-wrap items-center gap-4">
                <form method="POST" action="{% url 'add_cart' product.id %}">
                    {% csrf_token %}
                    <div class="flex items-center gap-3">
                        <input type="number" name="qty" id="qty-input" value="1" min="1" class="w-20 rounded-full border border-slate-300 bg-white px-4 py-2 text-sm text-slate-900
                                   shadow-sm outline-none focus:border-slate-900 focus:ring-2 focus:ring-slate-900/60
                                   [appearance:textfield]
                                   [&::-webkit-outer-spin-button]:appearance-none
                                   [&::-webkit-inner-spin-button]:appearance-none text-center" />
                        <button type="submit"
                            class="py-3 rounded-full bg-slate-900 px-8 text-sm font-semibold text-white shadow-sm hover:bg-slate-800">
                            Add to Cart
                        </button>
                    </div>
                </form>


                <button type="button"
                    class="grid h-12 w-12 place-items-center rounded-full border border-zinc-200 bg-white text-slate-900 shadow-sm hover:bg-zinc-50"
                    aria-label="Wishlist">
                    <i class="fa-regular fa-heart text-[18px]"></i>
                </button>
            </div>
        </div>

    </div>

    <div class="bg-[#F3F4F6] px-[19rem] mt-[5rem]">
        <div class="mx-auto px-4 py-12 lg:px-10">
            <!-- Tabs bar (the white rounded container) -->
            <div class="rounded-xl bg-white shadow-sm ring-1 ring-zinc-200/70">
                <ul class="flex flex-wrap items-center gap-10 px-6 py-2 text-sm font-semibold" id="default-tab"
                    data-tabs-toggle="#default-tab-content" role="tablist">
                    <!-- ACTIVE TAB -->
                    <li role="presentation">
                        <button
                            class="-mb-px inline-flex items-center px-1 py-4 text-blue-600 border-b-2 border-blue-600"
                            id="description-tab" data-tabs-target="#description" type="button" role="tab"
                            aria-controls="description" aria-selected="true">
                            Description
                        </button>
                    </li>

                    <li role="presentation">
                        <button
                            class="-mb-px inline-flex items-center px-1 py-4 text-zinc-800/80 border-b-2 border-transparent hover:text-zinc-900"
                            id="additional-tab" data-tabs-target="#additional" type="button" role="tab"
                            aria-controls="additional" aria-selected="false">
                            Additional Information
                        </button>
                    </li>

                    <li role="presentation">
                        <button
                            class="-mb-px inline-flex items-center px-1 py-4 text-zinc-800/80 border-b-2 border-transparent hover:text-zinc-900"
                            id="reviews-tab" data-tabs-target="#reviews" type="button" role="tab"
                            aria-controls="reviews" aria-selected="false">
                            Reviews
                        </button>
                    </li>
                </ul>
            </div>

            <!-- Content -->
            <div id="default-tab-content" class="mt-14">
                <!-- Description (VISIBLE BY DEFAULT) -->
                <div id="description" role="tabpanel" aria-labelledby="description-tab">
                    <h2 class="text-2xl font-semibold text-slate-900">Specifications:</h2>

                    <div class="mt-6 max-w-3xl space-y-3 text-sm leading-7 text-slate-600">
                        {{product.description}}
                    </div>
                </div>

                <!-- Additional Information -->

                {% if product.additional_information %}
                <div class="hidden" id="additional" role="tabpanel" aria-labelledby="additional-tab">
                    <h2 class="text-2xl font-semibold text-slate-900">Additional Information:</h2>
                    <div class="mt-6 max-w-3xl space-y-3 text-sm leading-7 text-slate-600">
                        <p>{{product.additional_information}}</p>
                    </div>
                </div>
                {% else %}
                <div class="hidden" id="additional" role="tabpanel" aria-labelledby="additional-tab">
                    <h2 class="text-2xl font-semibold text-slate-900">Additional Information:</h2>
                    <div class="mt-6 max-w-3xl space-y-3 text-sm leading-7 text-slate-600">
                        <p>There's no additional Information</p>
                    </div>
                </div>
                {% endif %}



                <!-- Reviews -->
                <div class="hidden" id="reviews" role="tabpanel" aria-labelledby="reviews-tab">
                    <h2 class="text-2xl font-semibold text-slate-900">Reviews:</h2>
                    <div class="mt-6 max-w-3xl space-y-3 text-sm leading-7 text-slate-600">
                        <p>No reviews yet.</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="mt-[5rem] px-[19rem]">
        <div class="flex justify-between">
            <h1 class="font-medium text-3xl">Recently Viewed Products</h1>
            <a href="#" class="py-1 px-4 bg-[#e1e1e1] rounded-full border border-[#E5E7EB] font-medium">View All</a>
        </div>
        <div class="grid grid-cols-4 gap-6">
            {% for p in products %}
            <div>
                <!-- Card -->
                <div class="rounded-2xl bg-[#f5f7fb] p-4 shadow-sm cursor-pointer mt-[2rem]"
                    onclick='window.location.href="{% url "product_detail" p.slug %}"'>
                    <!-- Product image -->
                    <div class="flex items-center justify-center h-48">
                        <img src="{{ p.image.url }}" alt="{{ p.name }}" class="max-h-full object-contain" />
                    </div>

                    <!-- Actions -->
                    <div class="mt-4 flex items-center justify-between gap-3">
                        <button
                            class="flex h-10 w-10 items-center justify-center rounded-full border border-slate-200 bg-white text-slate-600 hover:bg-slate-50">
                            <i class="fa-regular fa-eye text-sm"></i>
                        </button>

                        <button
                            class="flex-1 h-10 rounded-full bg-[#375DFB] text-sm font-semibold text-white hover:bg-[#2648d0] transition">
                            Add to cart
                        </button>

                        <button
                            class="flex h-10 w-10 items-center justify-center rounded-full border border-slate-200 bg-white text-slate-600 hover:bg-slate-50">
                            <i class="fa-regular fa-heart text-sm"></i>
                        </button>
                    </div>

                </div>
                <!-- Title -->
                <h3 class="mt-3 text-sm font-semibold text-slate-900">
                    {{ p.name }}
                </h3>

                <!-- Prices -->
                <div class="mt-1 flex items-center gap-2 text-sm">
                    <span class="font-bold text-slate-900">${{ p.sale_price }}</span>
                    {% if p.regular_price %}
                    <span class="text-slate-400 line-through">${{ p.regular_price}}</span>
                    {% endif %}
                </div>
            </div>
            {% endfor %}

        </div>
    </div>

    <div class="px-[19rem] mt-[4rem]">
        <div class="mt-10 w-full rounded-xl bg-gradient-to-r from-[#0052ff] to-[#0084ff] px-8 py- md:px-12 md:py-12">
            <div class="flex flex-col md:flex-row items-center justify-between gap-6">
                <!-- Left: Text -->
                <div class="text-white">
                    <h2 class="text-xl md:text-3xl font-bold leading-snug">
                        Don't Miss Out Latest<br />
                        Trends & Offers
                    </h2>
                    <p class="mt-2 text-sm md:text-base text-blue-100">
                        Register to receive news about the latest offers &amp; discount codes
                    </p>
                </div>

                <!-- Right: Form -->
                <form action="#" method="post"
                    class="w-full md:w-auto flex items-center bg-white rounded-full pl-5 pr-2 py-2 shadow-md gap-2">
                    <!-- CSRF in Django: {% csrf_token %} -->

                    <input type="email" name="email" placeholder="Enter your email"
                        class="flex-1 bg-transparent outline-none text-sm md:text-base text-gray-800 placeholder:text-gray-400 focus:ring-0 border-0 outline-0"
                        required />

                    <button type="submit"
                        class="px-5 md:px-6 py-2 rounded-full bg-[#3a4bff] text-white text-sm font-semibold whitespace-nowrap hover:bg-[#2a3bd6] transition">
                        Subscribe
                    </button>
                </form>
            </div>
        </div>
    </div>
</section>
{% endblock content %}